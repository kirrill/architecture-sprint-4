# Архитектурное решение по трейсингу

Трейсингом стоит покрыть в первую очередь следующие системы:
    
    MES, MES API, CRM API

Чтобы проследить куда теряются заказы, инициированные через MES API, а также понять почему тормозит главная страница в MES-системе.

Данные, которые должны попасть в трейсинг:
* идентификатор заказа
* время прохождения запроса "через" систему
* текущий статус заказа

## Мотивация

Внедрение трейсинга позволит:
* быстро находить причины проблем возникающих в работе ПО, что повысит скорость исправления ошибок;
* обнаруживать потенциальные узкие места в работе ПО, что позволит принять превентивные меры по их устранению;
* правильно выстраивать новые архитектурные решения, опираясь на накопленную статистику.


## Предлагаемое решение

Трейсинг можно реализовать с помощью sdk OTel и Jaeger - инструмента для визуализации трейсинга, который поддерживает OTel.

Для этого в код систем MES, MES API, CRM API необходимо будет добавить включение телеметрии, путем использования sdk OTel.

[Ссылка на C4 диаграмму с трейсингом](tracing.drawio)

## Компромиссы

Внедрение трейсинга может оказаться дорогим, если у команды окажется недостаточно компетенций, чтобы бысро внедрить его в MES-систему, т.к. эта система не писалась самой командой, а была приобретена.
Поэтому имеет смысл подходить к внедрению трейсинга поэтапно, начиная с самых простых и понятных вещей  и постепенно наращивая покрытие.

## Безопасность 

* Доступ к системе трейсинга должен быть обеспечен только сотрудникам с ролью Поддержка. 
* Все соединения с системой трейсинга через sdk OTel должны выполняться с использованием TLS